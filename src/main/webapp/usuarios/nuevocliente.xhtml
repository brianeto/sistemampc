<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../WEB-INF/template/indexTemplate.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:b="http://bootsfaces.net/ui">

    <ui:define name="main">
        <div class="container-fluid">

            <div class="row">
                <div class="col-xs-12 col-sm-6 col-md-6">

                </div>
                <div class="col-xs-12 col-sm-6 col-md-6">
                    <b:panel>
                        <f:facet name="heading">
                            Nuevo cliente
                        </f:facet>
                        <h:form>
                            <b:messages errorStyle="display:none"/>
                            <b:formGroup>
                                <b:inputText id="usuario"
                                             label="Usuario"
                                             value="#{registarClienteControlador.usuario.usuario}"/>
                                <b:message for="usuario"/>
                            </b:formGroup>
                            <b:formGroup>
                                <h:outputLabel value="Fecha nacimiento *" class="text-muted"/>
                                <div class="fechaRegister flex">
                                    <b:selectOneMenu id="anio"
                                                     style="flex:1 1 auto"
                                                     value="#{registarClienteControlador.anio}">
                                        <f:selectItem itemValue="" itemLabel="Año *"/>
                                        <f:selectItems value="#{fechaControlador.anios}" var="anio"
                                                       itemLabel="#{anio}" itemValue="#{anio}"
                                                       rendered="true"/>
                                    </b:selectOneMenu>
                                    <b:selectOneMenu id="mes"
                                                     style="flex:1 1 auto"
                                                     value="#{registarClienteControlador.mes}"
                                                     required="true">
                                        <f:selectItem itemValue="" itemLabel="Mes *"/>
                                        <f:selectItems value="#{fechaControlador.meses}" var="mes"
                                                       itemLabel="#{mes[1]}" itemValue="#{mes[0]}"/>
                                    </b:selectOneMenu>
                                    <b:selectOneMenu id="dia"
                                                     style="flex:1 1 auto"
                                                     value="#{registarClienteControlador.dia}"
                                                     required="true">
                                        <f:selectItem itemValue="" itemLabel="Día *"/>
                                        <f:selectItems value="#{fechaControlador.dias}" var="dia" itemValue="#{dia}"  itemLabel="#{dia}"/>
                                    </b:selectOneMenu>
                                </div>
                            </b:formGroup>
                            <div class="form-group mensaje">
                                <h:message errorClass="alert alert-danger" warnClass="alert alert-warning" for="anio"/>
                                <h:message errorClass="alert alert-danger" warnClass="alert alert-warning" for="mes"/>
                                <h:message errorClass="alert alert-danger" warnClass="alert alert-warning" for="dia"/>
                            </div>
                            <b:formGroup>
                                <b:inputSecret id="clave"
                                               label="Contarseña"
                                               value="#{registarClienteControlador.usuario.clave}"/>
                                <b:message for="clave"/>
                            </b:formGroup>
                            <b:formGroup>
                                <b:inputSecret id="cclave"
                                               label="Confirmar contarseña"
                                               value="#{registarClienteControlador.repetirClave}">
                                    <f:validator validatorId="passwordValidator"/>
                                    <f:attribute name="campo" value="#{component.parent.parent.clientId}:clave"/>
                                </b:inputSecret>
                                <b:message for="cclave"/>
                            </b:formGroup>
                            <b:formGroup>
                                <b:selectOneMenu id="psecreta"
                                                 label="Pregunta secreta"
                                                 title="Le permitira recuperar su cuenta en caso de perdida"
                                                 value="#{registarClienteControlador.usuario.preguntaSecretaId}" required="true">
                                    <f:selectItem itemValue="" itemLabel="Seleccione una pregunta secreta"/>
                                    <f:selectItems value="#{preguntaSecretaControlador.PreguntaSecretas()}" var="ps" itemLabel="#{ps.pregunta}" itemValue="#{ps.id}"/>
                                </b:selectOneMenu>
                                <b:message for="respuesta"/>
                            </b:formGroup>

                            <b:formGroup>
                                <b:inputText id="respuesta"
                                             label="Respuesta Secreta"
                                             placeholder="Respuesta Secreta"
                                             value="#{registarClienteControlador.usuario.respuestaPreguntaSecreta}"/>
                                <b:message for="respuesta"/>
                            </b:formGroup>
                            <b:formGroup>
                                <b:inputText id="nombre"
                                             label="Nombre *"
                                             placeholder="Nombre"
                                             value="#{registarClienteControlador.cliente.nombres}"/>
                                <b:message for="nombre"/>
                            </b:formGroup>
                            <b:formGroup>
                                <b:inputText id="ncedula"
                                             label="Número de cédula *"
                                             placeholder="Cédula"
                                             value="#{registarClienteControlador.cliente.numeroCedula}"/>
                                <b:message for="ncedula"/>
                            </b:formGroup>
                            <b:formGroup>
                                <b:inputText id="apellido"
                                             placeholder="apellidos"
                                             label="apellido *"
                                             value="#{registarClienteControlador.cliente.apellidos}"/>
                                <b:message for="apellido"/>
                            </b:formGroup>
                            <b:formGroup>
                                <b:inputText id="correo"
                                             label="Correo electrónico *"
                                             placeholder="correo eléctronico"
                                             value="#{registarClienteControlador.cliente.correoElectronico}"/>
                                <b:message for="correo"/>
                            </b:formGroup>
                            <hr />
                            <b:commandButton class="btn-success" 
                                             large-screen="full-width"
                                             value="Registrar"
                                             actionListener="#{registarClienteControlador.registrarCliente()}" 
                                             update="@form"/>
                        </h:form>
                    </b:panel>
                </div>
            </div>
        </div>
    </ui:define>

</ui:composition>
